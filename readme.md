# Тестовое задание для ШИФТ ЦФТ 
Условия задания описаны в [документе](Java_TestTask.pdf)

# Утилита фильтрации содержимого файлов v1.1

## Описание

Данная утилита позволяет разделять содержимое входных файлов на три разных выходных файла в зависимости от типа данных:

- **Целые числа** записываются в `integers.txt`
- **Вещественные числа** записываются в `floats.txt`
- **Строки** записываются в `strings.txt`

Также утилита поддерживает настройку пути для выходных файлов, префиксов в их названиях, а также ведение краткой и
полной статистики.

## Требования

- **Java 17**
- **Maven 3.8.1** или выше

## Установка и сборка

1. Склонируйте репозиторий:
   ```sh
   git clone https://github.com/lalik77/shift-cft-task.git   
   cd shift-cft-task
   ```
2. Соберите проект с помощью Maven:
   ```sh
   mvn clean package
   ```

## Использование

### Запуск программы

Запустите утилиту, передав в аргументах входные файлы:

```sh
java -jar target/util.jar in1.txt in2.txt
```

### Дополнительные параметры:

- `-o <путь>` – Задание пути для выходных файлов.
- `-p <префикс>` – Установка префикса для выходных файлов.
- `-a` – Включает режим добавления в файлы (по умолчанию они перезаписываются).
- `-s` – Включает краткую статистику (количество элементов).
- `-f` – Включает полную статистику (дополнительная информация о числах и строках).
- `-h, --help` – Вывести справку и выйти.
- `-V, --version` – Показать версию утилиты.

**Примеры:**

```sh
java -jar target/util.jar input.txt -o /output/path -p result_ -f
```

Выходные файлы:

- `/output/path/result_integers.txt`
- `/output/path/result_floats.txt`
- `/output/path/result_strings.txt`

По умолчанию файлы результатов **перезаписываются**. Файлы создаются **по мере необходимости** – если во входных
данных отсутствует определенный тип, соответствующий выходной файл **не будет создан**.

## Обработка ошибок

Программа обрабатывает все возможные ошибки и не прерывает выполнение при наличии некорректных данных. В случае
критической ошибки выводится сообщение пользователю.

### Ошибка, связанная с отсутствием входных файлов

- Если входные файлы не переданы, утилита предложит использовать опцию (`-h`) для просмотра справки, программа выводит
  сообщение и завершает выполнение:
  ```
  Воспользуйтесь опцией -h 
  Ошибка: Не переданы входные файлы!
  ```

### Ошибка: один из входных файлов недоступен для чтения.

- Если среди входных файлов есть файлы, недоступные для чтения, программа не прерывает работу, а пропускает их, выводит
  сообщение и продолжает выполнение:

```sh
java -jar util.jar in1.txt invalid.txt
```

  ```
  Ошибка: Файл <path>/invalid.txt недоступен для чтения. Пропускаем.
  Фильтрация завершена.
  Файлы сохранены в ./  
  ```

### Ошибка: один из входных файлов пустой.

- Если среди входных файлов есть пустые, программа не прерывает работу, а пропускает их, выводит сообщение и продолжает
  выполнение.

```sh
java -jar util.jar in1.txt empty.txt
```

  ```
  Ошибка: Файл <path>/empty.txt пустой. Пропускаем.
  Фильтрация завершена.
  Файлы сохранены в ./  
  ```

### Ошибка: отсутствие входных файлов.

- Если среди входных файлов есть несуществующие, программа не прерывает работу, а пропускает их, выводит сообщение и
  продолжает выполнение.

```sh
java -jar util.jar in1.txt non_existent.txt
```

  ```
  Ошибка: Файл <path>/non_existent.txt не существует. Пропускаем.
  Фильтрация завершена.
  Файлы сохранены в ./  
  ```

### Ошибка, связанная с передачей выходной директории (`-o`)

- Если аргумент для `-o` не передан, программа выводит сообщение и завершает выполнение:
  ```
  Воспользуйтесь опцией -h
  Ошибка: не указаны обязательные параметры для -o
  ```

### Ошибка: указанная директория для записи (`-o`), которая не существует.

- Если указана несуществующая директория, программа завершает работу и выводит соответствующее сообщение пользователю:

```sh
java -jar util.jar in1.txt -o ./absent_dir
```  

```
  Ошибка: Указанный путь не является директорией: ./absent_dir 
  ```

### Ошибка: указанная директория (`-o`) доступна только для чтения.

- Если указана директория которая доступна только для чтения, программа завершает работу и выводит соответствующее
  сообщение пользователю:

```sh
java -jar util.jar in1.txt -o ./read_only
```

  ```
  Ошибка: Указанный путь недоступен для записи: ./read_only 
  ```

### Ошибка, связанная с режимом добавления данных в выходные файлы (`-a`)

```shell
java -jar util.jar in1.txt in2.txt -a
```

- Если **ни один** из выходных файлов (`integers.txt`, `floats.txt`, `strings.txt`) не существует, программа выводит
  сообщение и завершает выполнение:
  ```
  Выходные файлы не существуют.
  Ошибка: Опция -a (режим добавления) может быть использована только в том случае, если хотя бы один 
  из выходных файлов уже существует..
  ```

### Ошибка, связанная с режимом добавления префикса к наименованию выходных файлов (`-p`)

- Если аргумент для `-p` не передан, программа выводит сообщение и завершает выполнение:
  ```
  Воспользуйтесь опцией -h
  Ошибка: не указаны обязательные параметры для -p
  ```

## Используемые зависимости

В проекте используются следующие сторонние библиотеки:

- **Picocli** (версия 4.7.5) – удобный парсер аргументов командной строки.
  ```xml
  <dependency>
      <groupId>info.picocli</groupId>
      <artifactId>picocli</artifactId>
      <version>4.7.5</version>
  </dependency>
  ```

- **JUnit 5** (версия 5.9.1) – для модульного тестирования.
  ```xml  
  <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter-engine</artifactId>
      <version>5.9.1</version>
      <scope>test</scope>
  </dependency>
  ```
  ```xml
  <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter-api</artifactId>
      <version>5.9.1</version>
      <scope>test</scope>
  </dependency>
   ```
- **Mockito** (версия 5.14.2) – для мокирования в тестах.

  ```xml
  <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-core</artifactId>
      <version>5.14.2</version>
      <scope>test</scope>
  </dependency>
  ```

